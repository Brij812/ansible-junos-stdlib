---
- name: Test juniper_junos_ping module
  hosts: all
  connection: local
  gather_facts: no
  roles:
    - Juniper.junos
  tasks:

#############
    - name: 'Performa a snap_check of storage'
      juniper_junos_jsnapy:
        host: "10.221.130.141"
        user: "regress"
        passwd: "MaRtInI"
        action: "snapcheck"
        test_files: "test_case.yaml"
      register: response

    - name: "Print the response"
      debug:
        var: response

    - name: Verify all JSNAPy tests passed
      assert:
        that:
          - "response.passPercentage == 100"